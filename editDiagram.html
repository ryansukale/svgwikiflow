<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="css/frameworks/bootstrap.min.css">
		<link href="css/frameworks/ui-lightness/jquery-ui-1.10.0.custom.css" rel="stylesheet">
        <link rel="stylesheet" href="css/frameworks/bootstrap-responsive.min.css">
		
		<!-- Sitewide common CSS stylesheet -->
		<link rel="stylesheet" href="css/common.css">

		
		<!-- CSS specific to this page -->
		<link rel="stylesheet" href="css/editDiagram.css">
		
		
		
		
		<!-- Moving the utils stylesheet to the bottom -->
		<link rel="stylesheet" href="css/utils.css">
		
		<style>
            body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>
	</head>

    <script type="text/javascript" src="embedapi.js"></script>
    <script type="text/javascript">
        var svgCanvas = null;

        function init_embed() {
            var frame = document.getElementById('svgedit');
			svgCanvas = new embedded_svg_edit(frame);
			
			// Hide main button, as we will be controlling new/load/save etc from the host document
			var doc;
			doc = frame.contentDocument;
			if (!doc)
			{
				doc = frame.contentWindow.document;
			}
			
			var mainButton = doc.getElementById('main_button');
			mainButton.style.display = 'none';            
        }
        
        function handleSvgData(data, error) {
			if (error)
			{
				alert('error ' + error);
			}
            else
			{
				alert('Congratulations. Your SVG string is back in the host page, do with it what you will\n\n' + data);
			}			
        }
        
        function loadSvg() {
            //var svgexample = '<svg width="640" height="480" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg"><g><title>Layer 1</title><rect stroke-width="5" stroke="#000000" fill="#FF0000" id="svg_1" height="35" width="51" y="35" x="32"/><ellipse ry="15" rx="24" stroke-width="5" stroke="#000000" fill="#0000ff" id="svg_2" cy="60" cx="66"/></g></svg>';
			
			var svgexample = '<svg width="640" height="480" xmlns="http://www.w3.org/2000/svg"> <g>   <title>Layer 1</title>   <rect fill="#b0cae5" x="22" y="188" width="112" height="65" id="svg_1" stroke="#000000"/>   <rect fill="#b0cae5" stroke="#000000" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="190" y="282" width="100" height="59" id="svg_4"/>   <rect fill="#b0cae5" stroke="#000000" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="164" y="90" width="106" height="61" id="svg_5"/>   <rect fill="#b0cae5" stroke="#000000" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x="343" y="160" width="135" height="64" id="svg_6"/>   <line fill="none" stroke="#000000" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x1="71" y1="199" x2="179" y2="119" id="svg_7"/>   <line fill="none" stroke="#000000" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x1="269" y1="311" x2="403" y2="200" id="svg_8"/>   <line fill="none" stroke="#000000" stroke-width="null" stroke-dasharray="null" stroke-linejoin="null" stroke-linecap="null" x1="249" y1="127" x2="386" y2="180" id="svg_11"/>  </g> </svg>'
            svgCanvas.setSvgString(svgexample);
        }
		
		function saveSvg() {			
			svgCanvas.getSvgString()(handleSvgData);
		}
    </script>

	
	<body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <div class="container">

			<div class="context-info clearfix">
				<div class="source-link simple-nav"><a href="viewDiagram_newVariant.html">Main Diagram</a>&nbsp ></div>
				<div class="simple-nav fork-title" contentEditable="true">&nbsp;New Untitled Diagram</div>
			</div>
			
			
			<div class="editing-container cleafix">
				
				<iframe src="svg-editor.html" width="100%" height="500px" id="svgedit" onload="init_embed()"></iframe>
				
			</div>
			
			
			
			<div class="notes-container clearfix">
				<div class="block-title">Notes</div>
					<div class="notes">
						<div contentEditable="true" class="note-item">
							Add some notes about your changes here.
						</div>
					</div>
			</div>
			
			
			
			<div class="actions-container">
				<div class="row-fluid">
				
					<div class="span8">
						
					</div>
					
					<div class="span4 actions">
						<div class="btn btn-success pull-right save-changes">Save Changes</div>
						<div class="btn btn-inverse pull-right cancel-changes">Cancel</div>
					</div>
				</div>
			</div>
			
			
            <footer>
                <p>&copy; Company 2012</p>
            </footer>

        </div> <!-- /container -->

    </body>

	
	<script src="js/frameworks/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
	<!-- Unminified Scripts for Dev version -->
	
	<script src="js/frameworks/jquery-1.9.1.min.js"></script>
	<script src="js/frameworks/require.js"></script>
	<script src="js/frameworks/vendor/bootstrap.js"></script>
	<script src="js/frameworks/jquery-ui-1.10.0.custom.js"></script>
	<script src="js/frameworks/json2.js"></script>
	<script src="js/frameworks/underscore.js"></script>
	<script src="js/frameworks/backbone.js"></script>
	<!-- ---------------------------------- -->
	
	<!-- Script specific to this page -->
	<script src="js/editDiagram.js"></script>
	
	<script type="text/javascript">
		
		var t=setTimeout(function(){
			
			loadSvg();
			
		},1500);
		
	</script>
	
	<!--
		<button onclick="loadSvg();">Load example</button>
		<button onclick="saveSvg();">Save data</button>
	-->
	

       
</html>
